// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator kysely {
  provider = "prisma-kysely"
  output   = "../src/lib/server"
  fileName = "schema.ts"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Anime {
  id            Int      @id
  title         String
  pictureMedium String?
  pictureLarge  String?
  startDate     String?
  endDate       String?
  nsfw          String?
  createdAt     DateTime
  updatedAt     DateTime
  mediaType     String
  status        String
  episodes      Int
  season        String?
  seasonYear    Int?
  source        String?
  genres        String

  Recommendation Recommendation[]
}

model User {
  id      Int     @id
  name    String  @unique
  picture String?

  Recommendation Recommendation[]
}

model Recommendation {
  id      Int @id
  animeId Int
  userId  Int

  anime Anime @relation(fields: [animeId], references: [id])
  user  User  @relation(fields: [userId], references: [id])

  @@unique([animeId, userId])
}
